<!DOCTYPE html><html lang="zh-TW"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>Journey Planner - åˆ†äº«çš„è¡Œç¨‹</title>        <!-- è®“ iMessage/LINE é¡¯ç¤ºæ¼‚äº®å¡ç‰‡çš„ meta æ¨™ç±¤ -->    <meta property="og:title" content="ğŸ—ºï¸ Journey Planner è¡Œç¨‹åˆ†äº«">    <meta property="og:description" content="é»æ“ŠæŸ¥çœ‹ç²¾å¿ƒè¦åŠƒçš„æ—…éŠè¡Œç¨‹ï¼">    <meta property="og:image" content="https://stevyee.github.io/journey-planner-share/preview.png">    <meta property="og:type" content="website">    <meta name="twitter:card" content="summary_large_image">        <style>        * { margin: 0; padding: 0; box-sizing: border-box; }        body {            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang TC', sans-serif;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);            min-height: 100vh;            display: flex;            justify-content: center;            align-items: center;            padding: 20px;        }        .container {            background: white;            border-radius: 24px;            padding: 40px 32px;            max-width: 400px;            width: 100%;            text-align: center;            box-shadow: 0 25px 80px rgba(0,0,0,0.35);        }        .logo { font-size: 72px; margin-bottom: 16px; }        h1 { color: #333; margin-bottom: 8px; font-size: 24px; }        .subtitle { color: #888; margin-bottom: 24px; font-size: 14px; }        .status {             padding: 16px;             border-radius: 12px;             margin-bottom: 20px;            font-size: 14px;        }        .status.loading { background: #e3f2fd; color: #1565c0; }        .status.success { background: #e8f5e9; color: #2e7d32; }        .status.fallback { background: #fff3e0; color: #e65100; }        .btn {            display: inline-block;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);            color: white;            padding: 16px 32px;            border-radius: 12px;            text-decoration: none;            font-weight: 600;            font-size: 16px;            margin: 8px;            transition: transform 0.2s, box-shadow 0.2s;        }        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102,126,234,0.4); }        .btn.secondary { background: #f5f5f5; color: #333; }        .contact {             margin-top: 28px;             padding: 20px;             background: #fafafa;             border-radius: 16px;            border: 1px solid #eee;        }        .contact h3 { color: #333; margin-bottom: 8px; font-size: 16px; }        .contact p { color: #666; margin: 0; font-size: 14px; line-height: 1.5; }        .footer { margin-top: 24px; color: #aaa; font-size: 12px; }        #itinerary-preview {             background: #f8f9fa;             border-radius: 12px;             padding: 16px;             margin-bottom: 20px;             text-align: left;            display: none;        }        #itinerary-preview h2 { font-size: 18px; color: #333; margin-bottom: 8px; }        #itinerary-preview p { font-size: 14px; color: #666; line-height: 1.5; }    </style></head><body>    <div class="container">        <div class="logo">ğŸ—ºï¸</div>        <h1>Journey Planner</h1>        <p class="subtitle">AI æ—…éŠè¡Œç¨‹è¦åŠƒ</p>                <div id="itinerary-preview"></div>                <div id="status" class="status loading">            â³ æ­£åœ¨å˜—è©¦é–‹å•Ÿ App...        </div>                <a href="#" id="openAppBtn" class="btn">ğŸ“± åœ¨ App ä¸­é–‹å•Ÿ</a>                <div class="contact">            <h3>ğŸ“§ éœ€è¦å–å¾— Appï¼Ÿ</h3>            <p>Journey Planner ç›®å‰ç‚ºç§äººæ¸¬è©¦ç‰ˆæœ¬<br>è«‹è¯ç¹« <strong>Steven</strong> å–å¾—å®‰è£æ–¹å¼</p>        </div>                <p class="footer">Â© 2024 Journey Planner by Steven</p>    </div>        <script>        const params = new URLSearchParams(window.location.search);        const data = params.get('data');        const statusEl = document.getElementById('status');        const openAppBtn = document.getElementById('openAppBtn');        const previewEl = document.getElementById('itinerary-preview');                console.log('Data parameter length:', data ? data.length : 0);                if (data && data.length > 0) {            // å»ºç«‹ App çš„ custom scheme URL            // é‡è¦ï¼šdata å·²ç¶“æ˜¯ URL-safe base64ï¼Œä¸è¦å†ç”¨ encodeURIComponent            const appURL = 'journeyplanner://itinerary?data=' + data;            openAppBtn.href = appURL;                        console.log('App URL length:', appURL.length);                        // å˜—è©¦è§£ç¢¼ä¸¦é¡¯ç¤ºè¡Œç¨‹é è¦½            try {                // URL-safe base64 è§£ç¢¼                let base64 = data.replace(/-/g, '+').replace(/_/g, '/');                while (base64.length % 4) base64 += '=';                const json = atob(base64);                const itinerary = JSON.parse(json);                                if (itinerary.title) {                    previewEl.style.display = 'block';                    previewEl.innerHTML =                         '<h2>ğŸ“ ' + itinerary.title + '</h2>' +                        '<p>' + (itinerary.summary || '') + '</p>' +                        '<p style="margin-top: 8px; color: #667eea;">ğŸ“… ' +                         (itinerary.days ? itinerary.days.length : 0) + ' å¤©è¡Œç¨‹</p>';                                        // æ›´æ–°ç‹€æ…‹                    statusEl.className = 'status success';                    statusEl.innerHTML = 'âœ… è¡Œç¨‹è¼‰å…¥æˆåŠŸï¼æ­£åœ¨é–‹å•Ÿ App...';                }            } catch (e) {                console.log('Could not parse itinerary preview:', e);            }                        // å˜—è©¦è‡ªå‹•é–‹å•Ÿ App            var appOpened = false;                        // ç›£è½é é¢æ˜¯å¦è¢«éš±è—ï¼ˆè¡¨ç¤º App é–‹å•Ÿäº†ï¼‰            document.addEventListener('visibilitychange', function() {                if (document.hidden) {                    appOpened = true;                }            });                        // å»¶é²ä¸€é»å†é–‹å•Ÿï¼Œç¢ºä¿è³‡æ–™æ­£ç¢ºè¼‰å…¥            setTimeout(function() {                window.location.href = appURL;            }, 500);                        // 2.5ç§’å¾Œæª¢æŸ¥æ˜¯å¦æˆåŠŸ            setTimeout(function() {                if (!appOpened && !document.hidden) {                    statusEl.className = 'status fallback';                    statusEl.innerHTML = 'ğŸ˜… App æœªå®‰è£æˆ–ç„¡æ³•é–‹å•Ÿ<br>è«‹é»æ“Šä¸‹æ–¹æŒ‰éˆ•æ‰‹å‹•å˜—è©¦';                }            }, 2500);            
        } else {
            statusEl.className = 'status fallback';
            statusEl.textContent = 'âŒ é€£çµç„¡æ•ˆï¼šç¼ºå°‘è¡Œç¨‹è³‡æ–™';
            openAppBtn.style.display = 'none';
        }
    </script>
</body>
</html>
